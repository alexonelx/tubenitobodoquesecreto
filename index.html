<!doctype html>
<html lang="es" data-theme="dark">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Tu Benito Bodoque Secreto</title>

  <!-- Favicons (Railway/GitHub friendly) -->
  <link rel="icon" href="./favicon.ico">
  <link rel="icon" href="./images/icons/favicon.ico?v=7">
  <link rel="icon" type="image/png" sizes="32x32" href="./images/icons/favicon-32x32.png?v=7">
  <link rel="apple-touch-icon" sizes="180x180" href="./images/icons/apple-touch-icon.png?v=7">
  <link rel="manifest" href="./images/icons/site.webmanifest">
  <meta name="theme-color" content="#0b1020">

  <!-- Font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap" rel="stylesheet">

  <style>
    /* =======================
      THEME TOKENS
    ======================= */
    :root{
      color-scheme: dark;

      --bg:#0b1020;
      --panel:#0f1730;
      --text:#eef2ff;
      --muted:#9aa7c7;
      --line:rgba(255,255,255,.12);

      --accentA:#ff4d5a;
      --accentB:#4ea6ff;

      --radius: 18px;
      --shadow: 0 18px 50px rgba(0,0,0,.45);
      --max: 1120px;

      --headerA: rgba(11,16,32,.82);
      --headerB: rgba(11,16,32,.30);

      --t: .18s ease;
    }

    html[data-theme="light"]{
      color-scheme: light;

      --bg:#f6f8ff;
      --panel:#ffffff;
      --text:#0f172a;
      --muted:#475569;
      --line:rgba(15,23,42,.12);

      --accentA:#ff3b4a;
      --accentB:#2a84ff;

      --shadow: 0 18px 50px rgba(15,23,42,.10);

      --headerA: rgba(246,248,255,.90);
      --headerB: rgba(246,248,255,.60);
    }

    /* =======================
      BASE
    ======================= */
    *{box-sizing:border-box}
    html{scroll-behavior:smooth;}
    body{
      margin:0;
      font-family: "Inter", system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
      color: var(--text);
      background:
        radial-gradient(900px 500px at 10% -10%, rgba(78,166,255,.14), transparent 60%),
        radial-gradient(900px 500px at 90% 0%, rgba(255,77,90,.10), transparent 55%),
        var(--bg);
      overflow-x:hidden;
      transition: background var(--t), color var(--t);
    }
    body, header, .panel{ transition: background var(--t), color var(--t), border-color var(--t); }

    a{color:inherit; text-decoration:none}
    button,input{font:inherit}
    img{max-width:100%; display:block}
    :focus-visible{ outline: 3px solid rgba(78,166,255,.55); outline-offset: 3px; border-radius: 12px; }

    .wrap{
      max-width: var(--max);
      margin: 0 auto;
      padding: 18px 18px 110px;
    }

    /* =======================
      NAV
    ======================= */
    header{
      position: sticky;
      top: 0;
      z-index: 50;
      backdrop-filter: blur(10px);
      background: linear-gradient(180deg, var(--headerA), var(--headerB));
      border-bottom: 1px solid var(--line);
    }

    .nav{
      max-width: var(--max);
      margin: 0 auto;
      padding: 12px 18px;
      display:flex;
      align-items:center;
      gap: 12px;
    }

    .brand{
      display:flex;
      align-items:center;
      gap: 12px;
      min-width: 0;
      flex: 1 1 auto;
    }

    .logoBox{
      width: 48px;
      height: 48px;
      border-radius: 16px;
      display:grid;
      place-items:center;
      overflow:hidden;
      flex: 0 0 auto;
      background: transparent;
    }
    .logoBox img{
      width: 100%;
      height: 100%;
      object-fit: contain;
      filter: drop-shadow(0 6px 14px rgba(0,0,0,.35));
    }
    html[data-theme="light"] .logoBox img{
      filter: drop-shadow(0 4px 10px rgba(0,0,0,.22));
    }

    .brandName{
      font-weight: 900;
      letter-spacing: -0.6px;
      font-size: 18px;
      line-height: 1.05;
      max-width: 30ch;
      white-space: nowrap;
      overflow: hidden;
      text-overflow: ellipsis;
    }

    .menu{
      display:flex;
      align-items:center;
      gap: 10px;
      flex: 0 0 auto;
    }

    .link{
      padding: 10px 12px;
      border-radius: 999px;
      color: var(--muted);
      border: 1px solid transparent;
      transition: transform var(--t), background var(--t), border-color var(--t), color var(--t);
      font-weight: 700;
    }
    .link:hover{
      color: var(--text);
      border-color: var(--line);
      background: rgba(255,255,255,.04);
      transform: translateY(-1px);
    }
    .link.active{
      color: var(--text);
      border-color: var(--line);
      background: rgba(255,255,255,.06);
    }

    .cta{
      padding: 10px 12px;
      border-radius: 999px;
      border: 1px solid var(--line);
      background: rgba(255,255,255,.06);
      font-weight: 800;
      transition: transform var(--t), background var(--t), border-color var(--t);
      white-space: nowrap;
    }
    .cta:hover{ transform: translateY(-1px); }

    .ctaPrimary{
      border: none;
      background: linear-gradient(135deg, rgba(255,77,90,.92), rgba(78,166,255,.86));
    }

    .themeToggle{
      width: 42px;
      height: 42px;
      border-radius: 999px;
      border: 1px solid var(--line);
      background: rgba(255,255,255,.06);
      color: var(--text);
      display:grid;
      place-items:center;
      cursor:pointer;
      transition: transform var(--t), background var(--t), border-color var(--t);
      flex: 0 0 auto;
    }
    .themeToggle:hover{ transform: translateY(-1px); }

    .menuBtn{
      width: 42px;
      height: 42px;
      border-radius: 14px;
      border: 1px solid var(--line);
      background: rgba(255,255,255,.06);
      color: var(--text);
      display:none;
      place-items:center;
      cursor:pointer;
      font-size: 20px;
      font-weight: 900;
      transition: transform var(--t), background var(--t), border-color var(--t);
    }
    .menuBtn:hover{ transform: translateY(-1px); }

    /* =======================
      MOBILE MENU (overlay)
    ======================= */
    .mobileMenu{
      position: fixed;
      inset: 0;
      background: rgba(0,0,0,.55);
      display:none;
      justify-content:flex-end;
      z-index: 80;
    }
    .mobileMenu.show{display:flex;}

    .mobilePanel{
      width: min(340px, 88%);
      height: 100%;
      background: var(--panel);
      border-left: 1px solid var(--line);
      padding: 18px;
      display:flex;
      flex-direction:column;
      gap: 12px;
      box-shadow: -20px 0 40px rgba(0,0,0,.45);
      transform: translateX(0);
    }

    .mobilePanel a{
      padding: 12px 12px;
      border-radius: 14px;
      border: 1px solid var(--line);
      background: rgba(255,255,255,.04);
      font-weight: 900;
      transition: transform var(--t), background var(--t), border-color var(--t);
    }
    .mobilePanel a:hover{ transform: translateY(-1px); background: rgba(255,255,255,.06); }

    .themeRow{
      margin-top: auto;
      display:flex;
      gap: 10px;
      align-items:center;
      justify-content:space-between;
      border: 1px solid var(--line);
      border-radius: 16px;
      padding: 12px;
      background: rgba(255,255,255,.03);
    }
    .themeRow strong{font-size: 14px; color: var(--muted);}

    /* =======================
      SECTIONS
    ======================= */
    section{scroll-margin-top: 90px;}

    .panel{
      margin-top: 22px;
      border: 1px solid var(--line);
      border-radius: calc(var(--radius) + 8px);
      background: linear-gradient(180deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      box-shadow: var(--shadow);
      overflow:hidden;
    }

    .block{
      padding: 32px;
      display:grid;
      gap: 26px;
      align-items:center;
      grid-template-columns: 1fr;
    }

    h1{
      margin:0;
      letter-spacing:-1px;
      font-weight: 900;
      font-size: clamp(34px, 7vw, 58px);
      line-height: 1.03;
    }

    .sub{
      margin: 12px 0 0;
      color: var(--muted);
      font-size: 16px;
      line-height: 1.7;
      max-width: 62ch;
    }

    .pillRow{
      display:flex;
      gap: 10px;
      flex-wrap: wrap;
      margin-top: 14px;
    }
    .pill{
      display:inline-flex;
      align-items:center;
      gap: 8px;
      padding: 8px 10px;
      border-radius: 999px;
      border: 1px solid var(--line);
      background: rgba(255,255,255,.04);
      color: var(--muted);
      font-weight: 800;
      font-size: 13px;
    }

    .ctaRow{margin-top: 18px; display:flex; gap: 10px; flex-wrap: wrap; align-items:center;}

    .btnPrimary{
      border: none;
      background: linear-gradient(135deg, rgba(255,77,90,.92), rgba(78,166,255,.86));
      color: var(--text);
      padding: 14px 18px;
      border-radius: 16px;
      font-weight: 900;
      cursor:pointer;
      transition: transform var(--t), filter var(--t);
    }
    .btnPrimary:hover{ transform: translateY(-2px); filter: brightness(1.05); }

    .btnGhost{
      display:inline-flex;
      align-items:center;
      gap:8px;
      padding: 14px 16px;
      border-radius: 16px;
      border: 1px solid var(--line);
      background: rgba(255,255,255,.02);
      color: var(--muted);
      opacity: .92;
      font-weight: 900;
      transition: transform var(--t), background var(--t), color var(--t);
    }
    .btnGhost:hover{
      transform: translateY(-1px);
      color: var(--text);
      background: rgba(255,255,255,.06);
      opacity: 1;
    }

    .art{
      position: relative;
      border: 1px solid var(--line);
      border-radius: var(--radius);
      background: rgba(255,255,255,.03);
      overflow:hidden;
      min-height: 360px;
      display:grid;
      place-items:center;
      isolation: isolate;
    }
    .art::after{
      content:"";
      position:absolute;
      inset:0;
      pointer-events:none;
      background: radial-gradient(600px 240px at 30% 10%, rgba(78,166,255,.10), transparent 55%);
      opacity:.9;
      z-index: 1;
    }
    .art img{
      width: 100%;
      height: 100%;
      object-fit: cover;
      transition: transform .25s ease;
      z-index: 0;
    }
    .panel:hover .art img{ transform: scale(1.02); }

    /* =======================
      DESKTOP
    ======================= */
    @media (min-width: 920px){
      .block{ grid-template-columns: 1.1fr .9fr; }
    }

    /* =======================
      MOBILE HEADER
    ======================= */
    @media (max-width: 720px){
      .brandName{
        font-size: 16px;
        line-height: 1.15;
        max-width: none;
        white-space: normal !important;
        overflow: visible !important;
        text-overflow: unset !important;
      }
      .menu .link{display:none;}
      .menu .cta{display:none;}
      .menuBtn{display:grid;}
      .block{ padding: 28px 20px; gap: 18px; }
      .art{ min-height: 340px; }
    }

    /* Reduce motion */
    @media (prefers-reduced-motion: reduce){
      *{ transition: none !important; scroll-behavior:auto !important; }
    }
    /* (4) HERO IMAGE: no recorte (contain) */
.artContain{
  padding: 18px;
  min-height: 320px;
}

.artContain img{
  object-fit: contain !important;
  height: 100% !important;
  max-height: 420px;
  transform: none !important;
}

/* Hover suave tambi√©n en artContain (sin recorte) */
.panel:hover .artContain img{
  transform: scale(1.02) !important;
}
/* (5) ESPACIADO + LECTURA */
.panel{
  margin-top: 26px;
}

.block{
  padding: 34px;
  gap: 28px;
}

.sub{
  font-size: 17px;
  line-height: 1.75;
}

@media (max-width: 720px){
  .block{
    padding: 26px 18px;
    gap: 18px;
  }
  .sub{
    font-size: 16px;
  }
}
/* (6) CARD GLOW SUAVE (premium) */
.panel{
  position: relative;
}

.panel::before{
  content:"";
  position:absolute;
  inset: 0;
  pointer-events:none;
  border-radius: inherit;
  background:
    radial-gradient(600px 240px at 20% 0%, rgba(78,166,255,.10), transparent 60%),
    radial-gradient(600px 240px at 80% 0%, rgba(255,77,90,.08), transparent 60%);
  opacity: .9;
}

.panel > *{
  position: relative;
}
/* (1) M√°s aire al texto de "C√≥mo funciona" */
.comofunciona{
  margin-top: 16px;
  margin-bottom: 16px;
  line-height: 1.85;
}
/* (3) Separaci√≥n extra en la secci√≥n "C√≥mo funciona" */
#como{
  padding-top: 50px;
  padding-bottom: 50px;
}
/* (4) T√≠tulo "C√≥mo funciona" con m√°s jerarqu√≠a */
#como h1{
  margin-bottom: 12px;
  letter-spacing: -0.9px;
  font-size: clamp(28px, 6vw, 46px);
}
/* En m√≥vil: oculta el toggle del header, deja solo el del men√∫ */
@media (max-width: 720px){
  #themeToggle{
    display: none !important;
  }
}
/* ===== SCROLL REVEAL (fade + slide) ===== */
.reveal{
  opacity: 0;
  transform: translateY(14px);
  transition: opacity .45s ease, transform .45s ease;
  will-change: opacity, transform;
}

.reveal.is-visible{
  opacity: 1;
  transform: translateY(0);
}

@media (prefers-reduced-motion: reduce){
  .reveal{ opacity: 1 !important; transform: none !important; transition: none !important; }
}
/* ===== STATES PRO ===== */

/* Se ve pro al navegar con teclado */
:focus-visible{
  outline: 3px solid rgba(78,166,255,.55);
  outline-offset: 3px;
  border-radius: 12px;
}

/* Quita el highlight feo en m√≥vil al tocar */
button, a{
  -webkit-tap-highlight-color: transparent;
}
/* ===== LOADING BUTTON (SKELETON / SHIMMER) ===== */
.btnPrimary.is-loading{
  opacity: .9;
  cursor: wait;
  pointer-events: none;
  position: relative;
}

.btnPrimary.is-loading::after{
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  background: linear-gradient(90deg,
    rgba(255,255,255,.06),
    rgba(255,255,255,.14),
    rgba(255,255,255,.06)
  );
  transform: translateX(-40%);
  animation: shimmer 1.1s ease infinite;
}

@keyframes shimmer{
  0%{ transform: translateX(-45%); }
  100%{ transform: translateX(45%); }
}
/* Loading tambi√©n para .cta (login/registro) */
.cta.is-loading{
  opacity: .9;
  cursor: wait;
  pointer-events: none;
  position: relative;
}

.cta.is-loading::after{
  content: "";
  position: absolute;
  inset: 0;
  border-radius: inherit;
  background: linear-gradient(90deg,
    rgba(255,255,255,.06),
    rgba(255,255,255,.14),
    rgba(255,255,255,.06)
  );
  transform: translateX(-40%);
  animation: shimmer 1.1s ease infinite;
}
/* ===== AUTH MODAL ===== */
.authOverlay{
  position: fixed;
  inset: 0;
  display: none;
  align-items: center;
  justify-content: center;
  background: rgba(0,0,0,.55);
  z-index: 120;
  padding: 18px;
}
.authOverlay.show{ display:flex; }

.authModal{
  width: min(520px, 100%);
  border: 1px solid var(--line);
  border-radius: calc(var(--radius) + 10px);
  background: var(--panel);
  box-shadow: 0 30px 80px rgba(0,0,0,.55);
  padding: 18px;
  position: relative;
}

.authClose{
  position:absolute;
  right: 12px;
  top: 12px;
  width: 40px;
  height: 40px;
  border-radius: 14px;
  border: 1px solid var(--line);
  background: rgba(255,255,255,.06);
  color: var(--text);
  cursor:pointer;
  font-weight: 900;
}

.authHead{ display:grid; gap: 12px; padding: 8px 6px 10px; }
.authTitle{ font-weight: 900; letter-spacing: -.5px; font-size: 18px; }

.authTabs{
  display:flex;
  gap: 10px;
  border: 1px solid var(--line);
  border-radius: 16px;
  padding: 6px;
  background: rgba(255,255,255,.03);
}
.authTab{
  flex: 1;
  padding: 10px 12px;
  border-radius: 12px;
  border: 1px solid transparent;
  background: transparent;
  color: var(--muted);
  font-weight: 900;
  cursor:pointer;
}
.authTab.is-active{
  color: var(--text);
  border-color: var(--line);
  background: rgba(255,255,255,.06);
}

.authForm{ display:grid; gap: 10px; padding: 10px 6px 6px; }
.authForm.is-hidden{ display:none; }

.authLabel{ font-size: 13px; color: var(--muted); font-weight: 800; margin-top: 4px; }
.authInput{
  padding: 12px 12px;
  border-radius: 14px;
  border: 1px solid var(--line);
  background: rgba(255,255,255,.04);
  color: var(--text);
  outline: none;
}
.authBtn{
  margin-top: 8px;
  padding: 12px 14px;
  border-radius: 14px;
  border: 1px solid var(--line);
  background: rgba(255,255,255,.06);
  color: var(--text);
  font-weight: 900;
  cursor:pointer;
}
.authBtnPrimary{
  border: none;
  background: linear-gradient(135deg, rgba(255,77,90,.92), rgba(78,166,255,.86));
}

.authHint{ margin: 2px 0 0; color: var(--muted); font-size: 13px; line-height: 1.45; min-height: 18px; }
.authHint.ok{ color: rgba(110,231,183,.95); }
.authHint.bad{ color: rgba(248,113,113,.95); }

/* ===== FAMILY SECTION (stub) ===== */
.familyGrid{ display:grid; gap: 14px; margin-top: 10px; }
.familyRow{ display:flex; gap: 10px; flex-wrap: wrap; }
.familyCard{
  border: 1px solid var(--line);
  border-radius: 18px;
  background: rgba(255,255,255,.04);
  padding: 14px;
}
.familyCard h2{ margin:0 0 8px; font-size: 18px; letter-spacing:-.4px; }
.familyCard p{ margin:0; color: var(--muted); line-height: 1.6; }
.smallInput{ width: min(420px, 100%); }

  </style>
</head>

<body>
  <header>
    <div class="nav">
      <div class="brand">
        <div class="logoBox" aria-hidden="true">
          <img src="images/LogoBenitopng.png" alt="">
        </div>
        <div class="brandName">Tu Benito Bodoque Secreto</div>
      </div>

      <div class="menu" aria-label="Navegaci√≥n">
        <a class="link" href="#inicio">Inicio</a>
        <a class="link" href="#como">C√≥mo funciona</a>

        <button class="themeToggle" id="themeToggle" type="button" aria-label="Cambiar tema">‚òÄÔ∏è</button>

        <a class="cta" href="#inicio" id="openLoginTop">Iniciar sesi√≥n</a>
        <a class="cta ctaPrimary" href="#inicio" id="openSignupTop">Registrarse</a>

        <button class="menuBtn" id="openMenu" type="button" aria-label="Abrir men√∫">‚ò∞</button>
      </div>
    </div>
  </header>

  <!-- MEN√ö M√ìVIL -->
  <div class="mobileMenu" id="mobileMenu" aria-hidden="true">
    <div class="mobilePanel" role="dialog" aria-label="Men√∫">
      <a href="#inicio" class="mLink">Inicio</a>
      <a href="#como" class="mLink">C√≥mo funciona</a>

      <a class="cta" href="#inicio" id="openLoginMobile">Iniciar sesi√≥n</a>
      <a class="cta ctaPrimary" href="#inicio" id="openSignupMobile">Registrarse</a>

      <div class="themeRow">
        <strong>Modo</strong>
        <button class="themeToggle" id="mobileThemeToggle" type="button" aria-label="Cambiar tema m√≥vil">üåô</button>
      </div>
    </div>
  </div>
<!-- ===== AUTH MODAL (LOGIN / SIGNUP) ===== -->
<div class="authOverlay" id="authOverlay" aria-hidden="true">
  <div class="authModal" role="dialog" aria-label="Acceso" aria-modal="true">
    <button class="authClose" id="authClose" type="button" aria-label="Cerrar">‚úï</button>

    <div class="authHead">
      <div class="authTitle">Acceso</div>
      <div class="authTabs" role="tablist" aria-label="Pesta√±as">
        <button class="authTab is-active" id="tabLogin" type="button" role="tab" aria-selected="true">Iniciar sesi√≥n</button>
        <button class="authTab" id="tabSignup" type="button" role="tab" aria-selected="false">Registrarse</button>
      </div>
    </div>

    <!-- LOGIN (solo tel√©fono) -->
    <form class="authForm" id="loginForm" autocomplete="on">
      <label class="authLabel">Tel√©fono (WhatsApp)</label>
      <input class="authInput" type="tel" id="loginPhone" placeholder="Ej: 9981234567" inputmode="numeric" required>

      <button class="authBtn authBtnPrimary" type="submit" id="loginBtn">Entrar</button>
      <p class="authHint" id="loginMsg" aria-live="polite"></p>
    </form>

    <!-- SIGNUP (usuario + tel√©fono) -->
    <form class="authForm is-hidden" id="signupForm" autocomplete="on">
      <label class="authLabel">Nombre de usuario</label>
      <input class="authInput" type="text" id="signupUser" placeholder="Ej: alex_99" minlength="2" maxlength="18" required>

      <label class="authLabel">Tel√©fono (WhatsApp)</label>
      <input class="authInput" type="tel" id="signupPhone" placeholder="Ej: 9981234567" inputmode="numeric" required>

      <button class="authBtn authBtnPrimary" type="submit" id="signupBtn">Crear cuenta</button>
      <p class="authHint" id="signupMsg" aria-live="polite"></p>
    </form>
  </div>
</div>

  <main class="wrap">
    <section id="inicio" class="panel reveal">
      <div class="block">
        <div class="copy">
          <h1>Intercambio navide√±o.</h1>
          <p class="sub">
            Organiza el intercambio sin confusiones: te unes con un link, agregas tus ideas de regalos
            y el d√≠a del sorteo recibes a qui√©n le toca regalar y su lista.
          </p>

          <div class="pillRow" aria-hidden="true">
            
          </div>

          <div class="ctaRow">
            <button class="btnPrimary" type="button" id="btnStart">Empezar</button>
            <a class="btnGhost" href="#como">Ver c√≥mo funciona ‚Üì</a>
          </div>
        </div>

        <div class="art artContain">
          <img src="images/Image2.webp" alt="Imagen navide√±a" />
        </div>
      </div>
    </section>

    <section id="como" class="panel reveal">
      <div class="block">
        <div class="copy">
          <h1 style="font-size:clamp(26px,5vw,40px); letter-spacing:-.7px;">C√≥mo funciona</h1>
          <p class="sub comofunciona">
            1) Alguien crea el intercambio y te comparte el link.<br>
            2) Entras, creas tu cuenta y te unes al grupo.<br>
            3) Agregas regalos con links y detalles.<br>
            4) El d√≠a del sorteo recibes a qui√©n le toca regalar y su lista.
          </p>
<section id="familia" class="panel reveal">
  <div class="block">
    <div class="copy">
      <h1 style="font-size:clamp(26px,5vw,40px); letter-spacing:-.7px;">Familia / Grupo</h1>
      <p class="sub">
        Aqu√≠ te unes con un link o creas un grupo. (De momento es demo: en el siguiente paso conectamos el sorteo y Twilio.)
      </p>

      <div class="familyGrid">
        <div class="familyCard">
          <h2>Unirme a un grupo</h2>
          <p>Pega el c√≥digo del grupo (ej: ABC123) y dale ‚ÄúUnirme‚Äù.</p>
          <div class="familyRow" style="margin-top:10px;">
            <input class="authInput smallInput" id="joinCode" placeholder="C√≥digo del grupo" />
            <button class="authBtn authBtnPrimary" type="button" id="btnJoin">Unirme</button>
          </div>
          <p class="authHint" id="joinMsg" aria-live="polite"></p>
        </div>

        <div class="familyCard">
          <h2>Crear un grupo</h2>
          <p>Crea un grupo y comparte el c√≥digo/link.</p>
          <div class="familyRow" style="margin-top:10px;">
            <input class="authInput smallInput" id="groupName" placeholder="Nombre del grupo (opcional)" />
            <button class="authBtn authBtnPrimary" type="button" id="btnCreate">Crear</button>
          </div>
          <p class="authHint" id="createMsg" aria-live="polite"></p>
          <div class="familyCard" style="margin-top:12px; background:rgba(255,255,255,.02);">
            <p><strong>C√≥digo:</strong> <span id="currentGroupCode">‚Äî</span></p>
            <p><strong>Link:</strong> <span id="currentGroupLink">‚Äî</span></p>
          </div>
        </div>

        <div class="familyCard">
          <h2>Mi sesi√≥n</h2>
          <p><strong>Usuario:</strong> <span id="sessionUser">‚Äî</span></p>
          <p><strong>Tel√©fono:</strong> <span id="sessionPhone">‚Äî</span></p>
          <div class="familyRow" style="margin-top:10px;">
            <button class="authBtn" type="button" id="btnLogout">Cerrar sesi√≥n</button>
            <button class="authBtn authBtnPrimary" type="button" id="btnStartDraw">Empezar sorteo (demo)</button>
          </div>
          <p class="authHint" id="drawMsg" aria-live="polite"></p>
        </div>
      </div>

    </div>

    <div class="art">
      <img src="images/Image5.webp" alt="Familia" />
    </div>
  </div>
</section>

          <div class="pillRow" aria-hidden="true">
            <span class="pill">üîí Privado</span>
            <span class="pill">üë®‚Äçüë©‚Äçüëß‚Äçüë¶ Para familia</span>
            <span class="pill">‚úÖ Seguro</span>
          </div>
        </div>

        <div class="art">
          <img src="images/Image5.webp" alt="C√≥mo funciona" />
        </div>
      </div>
    </section>
  </main>

  <script>
    // ===== THEME (dark/light) =====
    const root = document.documentElement;
    const themeToggle = document.getElementById("themeToggle");
    const mobileThemeToggle = document.getElementById("mobileThemeToggle");

    function setTheme(theme){
      root.setAttribute("data-theme", theme);
      localStorage.setItem("theme", theme);
      const nextEmoji = (theme === "dark") ? "‚òÄÔ∏è" : "üåô";
      themeToggle.textContent = nextEmoji;
      mobileThemeToggle.textContent = nextEmoji;
      document.querySelector('meta[name="theme-color"]')?.setAttribute("content", theme === "dark" ? "#0b1020" : "#f6f8ff");
    }

    const saved = localStorage.getItem("theme") || "dark";
    setTheme(saved);

    function toggleTheme(){
      const current = root.getAttribute("data-theme") || "dark";
      setTheme(current === "dark" ? "light" : "dark");
    }

    themeToggle.addEventListener("click", toggleTheme);
    mobileThemeToggle.addEventListener("click", toggleTheme);

    // ===== MOBILE MENU =====
    const mobileMenu = document.getElementById("mobileMenu");
    const openMenu = document.getElementById("openMenu");

    function openMobileMenu(){
      mobileMenu.classList.add("show");
      mobileMenu.setAttribute("aria-hidden","false");
    }
    function closeMobileMenu(){
      mobileMenu.classList.remove("show");
      mobileMenu.setAttribute("aria-hidden","true");
    }

    openMenu.addEventListener("click", openMobileMenu);
    mobileMenu.addEventListener("click", (e)=>{ if(e.target === mobileMenu) closeMobileMenu(); });

    document.querySelectorAll(".mLink, #openLoginMobile, #openSignupMobile").forEach(el=>{
      el.addEventListener("click", closeMobileMenu);
    });
// ===== AUTH + FAMILY (FRONT DEMO) =====
const authOverlay = document.getElementById("authOverlay");
const authClose = document.getElementById("authClose");
const tabLogin = document.getElementById("tabLogin");
const tabSignup = document.getElementById("tabSignup");
const loginForm = document.getElementById("loginForm");
const signupForm = document.getElementById("signupForm");

function msg(el, text, ok){
  if(!el) return;
  el.textContent = text || "";
  el.classList.remove("ok","bad");
  if(text) el.classList.add(ok ? "ok" : "bad");
}

function openAuth(mode){
  authOverlay.classList.add("show");
  authOverlay.setAttribute("aria-hidden","false");
  setAuthTab(mode === "signup" ? "signup" : "login");
}
function closeAuth(){
  authOverlay.classList.remove("show");
  authOverlay.setAttribute("aria-hidden","true");
}
function setAuthTab(which){
  const isSignup = which === "signup";
  tabSignup.classList.toggle("is-active", isSignup);
  tabLogin.classList.toggle("is-active", !isSignup);
  tabSignup.setAttribute("aria-selected", String(isSignup));
  tabLogin.setAttribute("aria-selected", String(!isSignup));
  signupForm.classList.toggle("is-hidden", !isSignup);
  loginForm.classList.toggle("is-hidden", isSignup);
}
authClose.addEventListener("click", closeAuth);
authOverlay.addEventListener("click", (e)=>{ if(e.target === authOverlay) closeAuth(); });
window.addEventListener("keydown", (e)=>{ if(e.key === "Escape") closeAuth(); });
tabLogin.addEventListener("click", ()=> setAuthTab("login"));
tabSignup.addEventListener("click", ()=> setAuthTab("signup"));

// Links: header + m√≥vil
["openLoginTop","openLoginMobile"].forEach(id=>{
  document.getElementById(id)?.addEventListener("click",(e)=>{ e.preventDefault(); openAuth("login"); closeMobileMenu?.(); });
});
["openSignupTop","openSignupMobile"].forEach(id=>{
  document.getElementById(id)?.addEventListener("click",(e)=>{ e.preventDefault(); openAuth("signup"); closeMobileMenu?.(); });
});

// ===== storage users/session =====
function getUsers(){
  try{ return JSON.parse(localStorage.getItem("bb_users") || "[]"); }catch{ return []; }
}
function setUsers(users){
  localStorage.setItem("bb_users", JSON.stringify(users));
}
function setSession(session){
  localStorage.setItem("bb_session", JSON.stringify(session));
}
function getSession(){
  try{ return JSON.parse(localStorage.getItem("bb_session") || "null"); }catch{ return null; }
}
function clearSession(){
  localStorage.removeItem("bb_session");
}

function cleanPhone(raw){ return (raw || "").replace(/\D/g, ""); }
function validPhoneMX(p){ return /^\d{10}$/.test(p); }
function validUsername(u){ return /^[a-zA-Z0-9_.]{2,18}$/.test(u); }

// SIGNUP: usuario + tel√©fono
signupForm.addEventListener("submit",(e)=>{
  e.preventDefault();
  const username = document.getElementById("signupUser").value.trim();
  const phone = cleanPhone(document.getElementById("signupPhone").value);
  const out = document.getElementById("signupMsg");

  if(!validUsername(username)) return msg(out, "Usuario inv√°lido. Usa letras/n√∫meros/_/. (2‚Äì18).", false);
  if(!validPhoneMX(phone)) return msg(out, "Tel√©fono inv√°lido. Debe ser de 10 d√≠gitos (MX).", false);

  const users = getUsers();
  if(users.some(u => u.phone === phone)) return msg(out, "Ese tel√©fono ya est√° registrado.", false);

  users.push({ username, phone });
  setUsers(users);
  setSession({ username, phone, at: Date.now() });

  msg(out, "Cuenta creada. Vamos a tu familia‚Ä¶", true);

  setTimeout(()=>{
    closeAuth();
    window.location.hash = "#familia";
    refreshFamilyUI();
  }, 500);
});

// LOGIN: por tel√©fono
loginForm.addEventListener("submit",(e)=>{
  e.preventDefault();
  const phone = cleanPhone(document.getElementById("loginPhone").value);
  const out = document.getElementById("loginMsg");

  if(!validPhoneMX(phone)) return msg(out, "Tel√©fono inv√°lido. Debe ser de 10 d√≠gitos (MX).", false);

  const users = getUsers();
  const user = users.find(u => u.phone === phone);
  if(!user) return msg(out, "No encuentro ese tel√©fono. Reg√≠strate primero.", false);

  setSession({ username: user.username, phone: user.phone, at: Date.now() });
  msg(out, `Bienvenido, ${user.username}.`, true);

  setTimeout(()=>{
    closeAuth();
    window.location.hash = "#familia";
    refreshFamilyUI();
  }, 500);
});

// ===== FAMILY UI =====
const sessionUser = document.getElementById("sessionUser");
const sessionPhone = document.getElementById("sessionPhone");
const btnLogout = document.getElementById("btnLogout");
const btnCreate = document.getElementById("btnCreate");
const btnJoin = document.getElementById("btnJoin");
const btnStartDraw = document.getElementById("btnStartDraw");
const currentGroupCode = document.getElementById("currentGroupCode");
const currentGroupLink = document.getElementById("currentGroupLink");

function genCode(len=6){
  const chars = "ABCDEFGHJKMNPQRSTUVWXYZ23456789";
  let out = "";
  for(let i=0;i<len;i++) out += chars[Math.floor(Math.random()*chars.length)];
  return out;
}

function refreshFamilyUI(){
  const s = getSession();
  if(sessionUser) sessionUser.textContent = s?.username || "‚Äî";
  if(sessionPhone) sessionPhone.textContent = s?.phone || "‚Äî";
}
refreshFamilyUI();

btnLogout?.addEventListener("click", ()=>{
  clearSession();
  refreshFamilyUI();
  msg(document.getElementById("drawMsg"), "Sesi√≥n cerrada.", true);
});

btnCreate?.addEventListener("click", ()=>{
  const s = getSession();
  const out = document.getElementById("createMsg");
  if(!s) return msg(out, "Primero inicia sesi√≥n o reg√≠strate.", false);

  const code = genCode(6);
  const url = `${location.origin}${location.pathname}?grupo=${code}#familia`;

  localStorage.setItem("bb_group", JSON.stringify({ code, owner: s.phone, at: Date.now() }));

  currentGroupCode.textContent = code;
  currentGroupLink.textContent = url;
  msg(out, "Grupo creado. Comparte el link.", true);
});

btnJoin?.addEventListener("click", ()=>{
  const s = getSession();
  const out = document.getElementById("joinMsg");
  if(!s) return msg(out, "Primero inicia sesi√≥n o reg√≠strate.", false);

  const input = document.getElementById("joinCode").value.trim().toUpperCase();
  if(input.length < 4) return msg(out, "C√≥digo inv√°lido.", false);

  localStorage.setItem("bb_joined_group", input);
  msg(out, `Listo. Te uniste al grupo ${input}.`, true);

  currentGroupCode.textContent = input;
  currentGroupLink.textContent = `${location.origin}${location.pathname}?grupo=${input}#familia`;
});

btnStartDraw?.addEventListener("click", ()=>{
  const s = getSession();
  const out = document.getElementById("drawMsg");
  if(!s) return msg(out, "Primero inicia sesi√≥n.", false);

  const group = localStorage.getItem("bb_joined_group") || (JSON.parse(localStorage.getItem("bb_group")||"null")?.code);
  if(!group) return msg(out, "Primero crea o √∫nete a un grupo.", false);

  msg(out, "Demo: aqu√≠ va el sorteo. Luego lo conectamos y mandamos WhatsApp por Twilio.", true);
});

// Auto-join desde link ?grupo=XXXX
(function autoJoinFromURL(){
  const params = new URLSearchParams(location.search);
  const g = (params.get("grupo") || "").trim().toUpperCase();
  if(g){
    localStorage.setItem("bb_joined_group", g);
    if(currentGroupCode) currentGroupCode.textContent = g;
    if(currentGroupLink) currentGroupLink.textContent = `${location.origin}${location.pathname}?grupo=${g}#familia`;
  }
})();

  // ===== "EMPEZAR" LOADING FAKE =====
const btnStart = document.getElementById("btnStart");

if (btnStart){
  btnStart.addEventListener("click", () => {
    const originalText = btnStart.textContent;

    // estado loading
    btnStart.classList.add("is-loading");
    btnStart.textContent = "Cargando...";

    setTimeout(() => {
      btnStart.classList.remove("is-loading");
      btnStart.textContent = originalText;

      // scroll suave a "C√≥mo funciona"
      document.getElementById("como")?.scrollIntoView({
        behavior: "smooth"
      });
    }, 650);
  });
}


    // ===== ACTIVE NAV LINK =====
    const sections = ["inicio","como"].map(id => document.getElementById(id));
    const navLinks = Array.from(document.querySelectorAll('.menu .link'));

    const setActive = () => {
      const y = window.scrollY + 120;
      let current = "inicio";
      for (const s of sections){
        if (s && s.offsetTop <= y) current = s.id;
      }
      navLinks.forEach(a => a.classList.toggle("active", a.getAttribute("href") === `#${current}`));
    };
    window.addEventListener("scroll", setActive, { passive:true });
    setActive();
    // ===== SCROLL REVEAL =====
const revealEls = document.querySelectorAll(".reveal");
const io = new IntersectionObserver((entries) => {
  entries.forEach((e) => {
    if (e.isIntersecting) {
      e.target.classList.add("is-visible");
      io.unobserve(e.target); // una sola vez
    }
  });
}, { threshold: 0.15 });

revealEls.forEach(el => io.observe(el));

  </script>
</body>
</html>
